{
  "#meta": {
    "format": "ITF",
    "format-description": "https://apalache.informal.systems/docs/adr/015adr-trace.html",
    "description": "Created by Apalache on Wed Sep 07 13:55:41 CEST 2022"
  },
  "params": [
    "Validators",
    "Coins",
    "NoMaxCoins",
    "Accounts"
  ],
  "vars": [
    "numRequests",
    "grantStore",
    "event",
    "expectedResponse"
  ],
  "states": [
    {
      "#meta": {
        "index": 0
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "type": "no-event"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "no-response"
      },
      "grantStore": {
        "#map": [
          
        ]
      },
      "numRequests": 0
    },
    {
      "#meta": {
        "index": 1
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allowList": {
              "#set": [
                "a1",
                "a3"
              ]
            },
            "authorizationType": "send",
            "spendLimit": 0
          },
          "expirationTime": "future"
        },
        "grantee": "a2",
        "granter": "a1",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ]
        ]
      },
      "numRequests": 1
    },
    {
      "#meta": {
        "index": 2
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "authorizationType": "send"
          },
          "expirationTime": "none"
        },
        "grantee": "a3",
        "granter": "a2",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 2
    },
    {
      "#meta": {
        "index": 3
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allow": true,
            "authorizationType": "delegate",
            "maxTokens": 1,
            "validators": {
              "#set": [
                "v3"
              ]
            }
          },
          "expirationTime": "future"
        },
        "grantee": "a1",
        "granter": "a3",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ]
        ]
      },
      "numRequests": 3
    },
    {
      "#meta": {
        "index": 4
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allow": false,
            "authorizationType": "redelegate",
            "maxTokens": 0,
            "validators": {
              "#set": [
                "v2"
              ]
            }
          },
          "expirationTime": "none"
        },
        "grantee": "a2",
        "granter": "a1",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 4
    },
    {
      "#meta": {
        "index": 5
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allow": false,
            "authorizationType": "redelegate",
            "maxTokens": -99,
            "validators": {
              "#set": [
                "v2"
              ]
            }
          },
          "expirationTime": "none"
        },
        "grantee": "a3",
        "granter": "a1",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 5
    },
    {
      "#meta": {
        "index": 6
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grantee": "a1",
        "msg": {
          "content": {
            "amount": 0,
            "delegatorAddress": "v3",
            "typeUrl": "redelegate",
            "validatorDstAddress": "v3",
            "validatorSrcAddress": "v1"
          },
          "signer": "a1"
        },
        "type": "request-execute"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-execute"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 6
    },
    {
      "#meta": {
        "index": 7
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allowList": {
              "#set": [
                
              ]
            },
            "authorizationType": "send",
            "spendLimit": 0
          },
          "expirationTime": "none"
        },
        "grantee": "a3",
        "granter": "a1",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 7
    },
    {
      "#meta": {
        "index": 8
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grantee": "a2",
        "msg": {
          "content": {
            "amount": 0,
            "delegatorAddress": "v1",
            "typeUrl": "undelegate",
            "validatorAddress": "v1"
          },
          "signer": "a1"
        },
        "type": "request-execute"
      },
      "expectedResponse": {
        "error": "grant-not-found",
        "ok": false,
        "type": "response-execute"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 8
    },
    {
      "#meta": {
        "index": 9
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allow": false,
            "authorizationType": "delegate",
            "maxTokens": -99,
            "validators": {
              "#set": [
                "v2"
              ]
            }
          },
          "expirationTime": "past"
        },
        "grantee": "a2",
        "granter": "a3",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "authorization-expired",
        "ok": false,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 9
    },
    {
      "#meta": {
        "index": 10
      },
      "Accounts": {
        "#set": [
          "a1",
          "a2",
          "a3"
        ]
      },
      "Coins": {
        "#set": [
          0,
          1
        ]
      },
      "NoMaxCoins": -99,
      "Validators": {
        "#set": [
          "v1",
          "v2",
          "v3"
        ]
      },
      "event": {
        "grant": {
          "authorization": {
            "allow": true,
            "authorizationType": "redelegate",
            "maxTokens": -99,
            "validators": {
              "#set": [
                "v2"
              ]
            }
          },
          "expirationTime": "none"
        },
        "grantee": "a1",
        "granter": "a3",
        "type": "request-grant"
      },
      "expectedResponse": {
        "error": "none",
        "ok": true,
        "type": "response-grant"
      },
      "grantStore": {
        "#map": [
          [
            {
              "grantee": "a3",
              "granter": "a2",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "authorizationType": "send"
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    "a1",
                    "a3"
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "delegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "delegate",
                "maxTokens": 1,
                "validators": {
                  "#set": [
                    "v3"
                  ]
                }
              },
              "expirationTime": "future"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "send"
            },
            {
              "authorization": {
                "allowList": {
                  "#set": [
                    
                  ]
                },
                "authorizationType": "send",
                "spendLimit": 0
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a2",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": 0,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a1",
              "granter": "a3",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": true,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ],
          [
            {
              "grantee": "a3",
              "granter": "a1",
              "msgTypeUrl": "redelegate"
            },
            {
              "authorization": {
                "allow": false,
                "authorizationType": "redelegate",
                "maxTokens": -99,
                "validators": {
                  "#set": [
                    "v2"
                  ]
                }
              },
              "expirationTime": "none"
            }
          ]
        ]
      },
      "numRequests": 10
    }
  ]
}